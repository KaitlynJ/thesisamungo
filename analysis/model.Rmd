---
output: pdf_document
---
```{r include_rticles, include = FALSE}
# This chunk ensures that the rticles package is installed and loaded
# This rticles package includes the template files for the thesis and also
# two functions used for labeling and referencing
if(!require(devtools))
  install.packages("devtools", repos = "http://cran.rstudio.com")
if(!require(rticles)){
  library(devtools)
  devtools::install_github("ismayc/rticles")
  }
library(rticles)
```
---
header-includes:
- \usepackage{graphicx,latexsym}
- \usepackage{amssymb,amsthm,amsmath}
- \usepackage{longtable,booktabs,setspace}
- \usepackage{tikz}
- \usepackage{setspace}
output: pdf_document
---
\onehalfspacing

```{r load_pkgs, message = FALSE}
# List of packages required for this analysis
pkg <- c("dplyr", "ggplot2", "knitr", "devtools")
new.pkg <- pkg[!(pkg %in% installed.packages())]
if (length(new.pkg))
  install.packages(new.pkg, repos = "http://cran.rstudio.com")

# Load packages
library(dplyr)
library(ggplot2)
library(knitr)
```

```{r load_data, cache=TRUE, echo=FALSE, message=FALSE}
setwd("~/Desktop/Thesis/analysis") #remove later
"Load the data from the National Ambulatory Care Survey **insert link**"
setwd("~/Desktop/Thesis/analysis")
NAMCS.work <- read.csv("NAMCS08-11.csv", header = TRUE)
```

```{r prep_data}
# Subset dataset to only include urgent care visits
urgentCareOnly.df <- subset(NAMCS.work, TYPE4CLASS == "Urgent Care Center/Freestanding Clinic")
# fixing NAs/blanks
urgentCareOnly.df[c("VYEAR")][is.na(urgentCareOnly.df[c("VYEAR")])] <- 2011 # 2011's got entered blank
urgentCareOnly.df[urgentCareOnly.df == "Blank"] <- NA
urgentCareOnly.df[urgentCareOnly.df == "Missing Data"] <- NA
urgentCareOnly.df[urgentCareOnly.df == "Missing data"] <- NA

```

```{r demographics_model}

cont.vars <- c("PCTPOVR", "PBAMORER", "URBANRUR", "AGER", "RACER", "SEX", "PAYTYPER")
Cont.model <- urgentCareOnly.df[cont.vars]
Cont.model <- na.omit(Cont.model)

```

```{r percenTable.function}

probtable.func <- function(variable){
    # get name
    category <- deparse(substitute(variable))
    category <- data.frame(name = category, variable = "", Freq = 100.00, stringsAsFactors = FALSE)
    # get proportions
    table.sums <- table(variable)
    variable.tbl <- round(prop.table(table.sums)*100, 2)
    variable.df <- as.data.frame(variable.tbl, stringsAsFactors = FALSE)
    # add id rows
    variable.df <- cbind(data.frame(name = "", stringsAsFactors = FALSE), variable.df)
    variable.df <- rbind( variable.df[0,0], category, variable.df[] )
    
    variable.df
}

```


